# HTStream_GL
QC for space omics data
Instructions to generate an iSEQ QC report for paired-end reads with HTStream on Yi-Chun’s computer:
*Note: all screen shots of my terminal are colored – yours will be a white background with black text (unless you change the settings for your terminal).

1.	Go to the following folder on Yi-Chun’s Desktop:
iSeq_Analysis

2.	In the folder ‘iSeq_Analysis’ make a new folder for the iSEQ run you want to analyze.
Note: The title of the folder cannot have any spaces or weird characters. I suggest that the title be: date_iSEQ_runX. 
For example: 20181016_iSeq_run2

3.	Go into the folder you made in step 2 and make a new folder titled ‘Fastq’.

4.	Download all the fastq.gz files that were generated from the iSEQ run you want to analyze into the Fastq folder.

5.	Go into the Fastq folder and check to make sure that R1 and R2 files have successfully downloaded for each sample.

6.	Open a terminal window.
Note: If you don’t know how to get to the terminal, click on the magnifying glass icon in the top-right corner of the computer screen and type in “terminal”; it should appear in the drop-down menu – double click on it

 

7.	A terminal window should appear, it will look as follows (but yours will be a white background with black text – you can customize the colors if you want)

 

8.	Type the following command followed by pressing enter to make sure you’re in the home directory.
Command:
$ cd

9.	Move into the folder you created in step 2 by typing the command below.
Command:
$ cd Desktop/iSeq_Analysis/<folder_title_from_step_2>
Example:
$ cd Desktop/iSeq_Analysis/20181016_iSeq_run2

10.	Once in that directory, type the following command to see what’s in there.
Command:
$ ls

Note: A folder (aka directory) titled ‘Fastq’ should be listed (this is the folder that you downloaded all of your fastq.gz files into in step 4)

11.	Type the command below to use the text editor, nano, to make a text file that contains a list of the samples you ran on the iSeq and save it as ‘samples.txt’ 

Note: There should be no additional spaces to the right or left of each sample name. The sample names should match exactly up to the S# of the names of the fastq files that are in the Fastq folder.

Example:
If you have the following fastq.gz files in your Fastq folder:

 

Then you want to make a samples.txt file with the following names:

  

*Note that the names in the samples.txt file match exactly to the fastq.gz samples up to the S# for each sample.
*Also Note that ‘Undetermined_S0’ is included in the list – this is necessary to calculate the correct number of total reads that were generated. 

To make a samples.txt file, follow the instructions below.

Command:
$ nano

The following will appear:
 

Start typing your samples names but keep in mind there should be no additional spaces to the right or left of each sample name. When you’ve typed a sample name, press enter to get to the next line to type the next sample name.

Once you’ve typed all of your sample names it should look like the following example:
 

Note that the cursor is at the end of the last sample name (make sure there are no spaces after that cursor by pressing delete).

After you’ve typed your sample names (and double checked that each name is unique), press control ‘x’ and you will be asked if you want to save:

 

Click the ‘y’ key. It will then ask you to title your document:
 

Type ‘samples.txt’, it will look as follows:

 

Then click enter.

12.	Type the following command to check what’s in your folder.
Command:
$ ls

Note: The folder titled ‘Fastq’ and the file you just made, ‘samples.txt’ should be listed. 

13.	Type the following command to check your ‘samples.txt’ file.
Command:
$ cat samples.txt

Example:
 

14.	You are now ready to run the HTStream program. To do so, type the following command.
Command:
$ nohup /Users/ychen30/Desktop/iSeq_Analysis/1_HTStream_rRNA_SD.sh &

15.	This will take up to an hour or so to run for iSEQ data.

16.	To check the progress, type the command below followed by enter.
Command:
$ top

Note: If the program is still running you will see it listed as hts_SeqScreener, etc. as shown below:

 

Click ‘q’ to get out of the top command.

17.	Once complete, there should be a .log file generated for each sample. To view the files that have been generated, use the following command.
Command:
$ ls

Note: The folder titled ‘Fastq’, the file titled ‘samples.txt’, and a .log file for each sample in the ‘samples.txt’ file should be listed.

18.	Type the following command to calculate the total number of reads generated by the iSeq run.
Command:
$ /Users/ychen30/Desktop/iSeq_Analysis/2_calc_totalreads.sh

Note: This command will run very quickly (within seconds to a minute or two) and will generate one .txt file

19.	To view the files generated, type the command below.


Command:
$ ls

*Note: You should see the following txt file (in addition to the files and folder that were previously there):
totalreads.txt

20.	Use the totalreads.txt and log files to generate a rRNA report for each sample by typing the command below.
Command:
$ /Users/ychen30/Desktop/iSeq_Analysis/3_make_rRNA_reports.sh

Note: This command will run very quickly (within seconds to a minute or two) and will generate several .txt files

21.	To view the files generated, type the command below.
Command:
$ ls

*Note: You should see the following 4 txt files for each sample (in addition to the files and folder that were previously there):
<sample_name>_rRNA-report_tmp.txt
<sample_name>_rRNA-report.txt 
<sample_name>_tmp.txt
<sample_name>_.txt

22.	Use the rRNA reports from each sample to generate a complete rRNA report containing all the info from all the samples by typing the command below.
Command:
$ /Users/ychen30/Desktop/iSeq_Analysis/4_make_complete_rRNA_report.sh

Note: This command will run very quickly (within seconds) and will generate one additional .txt file

23.	Use the following command to see the output files that were generated from step 20:
Command:
$ ls

*Note: You should see the following txt file (in addition to the files and folder that were previously there): 
complete_rRNA-report.txt

24.	Your command line work is now done. To view the complete_rRNA-report, go to the iSeq_Analysis folder on Yi-Chun’s desk top then double click into the folder you created in step 2. Once in that folder, right click on the ‘complete_rRNA-report.txt’ file and open with Microsoft excel. You will see a table appear that looks like the rRNA reports I have sent you. Go ahead and save that as a .xlsx file (and re-name it) so that you can make and save changes. 
